<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>reveal.js – The HTML Presentation Framework</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css" id="theme">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section data-markdown>
					# Flutter
				</section>
				<section data-markdown>
					Flutter自带的部件，基本全都在`package:flutter/material.dart`里，用的时候只需要
					```dart
					import 'package:flutter/material.dart';
					```
				</section>
				<section>
					<section data-markdown>
						## pubspec.yaml
					</section>
					<section data-markdown>
						```yaml
						name: com.track.business
						description: track app business client

						version: 1.0.8+31

						environment:
							sdk: ">=2.0.0-dev.68.0 <3.0.0"

						dependencies:
							flutter:
							sdk: flutter

							# The following adds the Cupertino Icons font to your application.
							# Use with the CupertinoIcons class for iOS style icons.
							cupertino_icons: ^0.1.2
							http: ^0.12.0
							rxdart: ^0.19.0
							intl: ^0.15.7
							qr_flutter: ^1.1.3
							barcode_scan:
							git: https://github.com/fh345392977/flutter_barcode_reader
							shared_preferences: ^0.4.2
							image_picker: ^0.4.10
							web3dart:
							git: https://github.com/yijian166/web3dart
							eth_wallet_dart:
							git: https://github.com/yijian166/eth-wallet-dart
							url_launcher: ^3.0.3
							flutter_webview_plugin: ^0.3.0+2
							amap_location:
							git: https://github.com/fh345392977/flutter_amap_location
							flutter_launcher_icons: ^0.6.1
							package_info: ^0.3.2
							image_picker_saver: ^0.1.0
							simple_permissions: ^0.1.9
							store_redirect: ^1.0.1
							path_provider: ^0.4.1
							flutter_image_compress: ^0.2.1
							share: ^0.5.3
							flutter_slidable: ^0.4.9

						flutter_icons:
							image_path: "icon/icon.png"
							android: true
							ios: true

						dev_dependencies:
							flutter_test:
							sdk: flutter


						# For information on the generic Dart part of this file, see the
						# following page: https://www.dartlang.org/tools/pub/pubspec

						# The following section is specific to Flutter.
						flutter:

							# The following line ensures that the Material Icons font is
							# included with your application, so that you can use the icons in
							# the material Icons class.
							uses-material-design: true

							# To add assets to your application, add an assets section, like this:
							# assets:
							#  - images/a_dot_burr.jpeg
							#  - images/a_dot_ham.jpeg
							assets:
							- lib/common/services/wallet/en-mnemonic-word-list.txt
							- lib/common/images/production.png
							- lib/common/images/token_icon.png
							- lib/common/images/goods.png
							- lib/common/images/b_fabricator.png
							- lib/common/images/b_manufacturer.png
							- lib/common/images/b_others.png
							- lib/common/images/b_purchaser.png
							- lib/common/images/b_seller.png
							- lib/common/images/shop_bg.png
							- lib/common/images/funds_bg.png
							- lib/common/images/logo_bg_new.png
							- lib/common/images/wallet_mnemonic.png
							- lib/common/images/wallet_complete.png
							- lib/common/images/offline.png
							- lib/common/images/placeholder.png
							- lib/common/images/loading.gif
							- lib/common/images/dot_border.png
							- lib/common/images/trace_bg.png
							- lib/common/images/empty_wallet.png

							# business
							- lib/images/verify_error.png # 出错了
							- lib/images/verify_ok.png # 审核成功
							- lib/images/verify_ing.png # 审核中
							- lib/images/verify_fail.png # 审核失败
							- lib/images/verify_unfinish.png # 信息待完善
							- lib/images/id_back.png
							- lib/images/id_front.png
							- lib/images/id_self.png




							# An image asset can refer to one or more resolution-specific "variants", see
							# https://flutter.io/assets-and-images/#resolution-aware.

							# For details regarding adding assets from package dependencies, see
							# https://flutter.io/assets-and-images/#from-packages

							# To add custom fonts to your application, add a fonts section here,
							# in this "flutter" section. Each entry in this list should have a
							# "family" key with the font family name, and a "fonts" key with a
							# list giving the asset and other descriptors for the font. For
							# example:
							# fonts:
							#   - family: Schyler
							#     fonts:
							#       - asset: fonts/Schyler-Regular.ttf
							#       - asset: fonts/Schyler-Italic.ttf
							#         style: italic
							#   - family: Trajan Pro
							#     fonts:
							#       - asset: fonts/TrajanPro.ttf
							#       - asset: fonts/TrajanPro_Bold.ttf
							#         weight: 700
							#
							# For details regarding fonts from package dependencies,
							# see https://flutter.io/custom-fonts/#from-packages
							fonts:
							- family: TraceFont
								fonts:
								- asset: lib/common/fonts/iconfont.ttf

						```
					</section>
				</section>
				<section>
					<section data-markdown>
						## Widget

						分为有状态(`StatefulWidget`)和无状态(`StatelessWidget`)两种
					</section>
					<section data-markdown>
						`StatefulWidget`可以在内部维护一个状态，通过`setState`改变状态，可以实现诸如点击按钮后loading，加载数据时loading之类的效果。
						```dart
						setState(() {
							_loading = true;
						});
						```
					</section>
					<section data-markdown>
						`StatelessWidget`则用于纯展示组件，组件内部没有状态。
					</section>
				</section>
				<section data-markdown>
					## MaterialApp
					布局上的顶层Widget，可以在里面定义首页(`home`)，静态路由(`routes`)，主题(`theme`)，App标题(类似于document.title`title`)等等。
				</section>
				<section>
					<section data-markdown>
						## Scaffold
						如果说`MaterialApp`是网页中的`html`元素，那么`Scaffold`就是`body`。
					</section>
					<section data-markdown>
						`Scaffold`帮你定义了一个App页面该有的主要元素，头部(`appBar`)，主内容(`body`)，导航(`bottomNavigationBar`)
					</section>
					<section data-markdown>
						有些方法只有在`Scaffold`环境下才能调用，如`showDialog`唤起弹框,`showSnackBar`唤起底部提示。
					</section>
					<section data-markdown>
						`Scaffold`的实例方法需要传入上下文`context`，一般用法为
						```dart
						Scaffold.of(context).showDialog()
						```
					</section>
				</section>
				<section data-markdown>
					## AppBar
					几乎每个页面都需要这么一个，常用属性是标题(`title`)，左侧操控区(`leading`)，右侧操作区(`actions`)
				</section>
				<section data-markdown>
					## BottomNavigationBar
					底部导航
					```dart
					class TabPage extends StatefulWidget {
						@override
						_TabPageState createState() => _TabPageState();
					}

					class _TabPageState extends State<TabPage> {
						void onBottomTabTap(int index) {
						bodyPageController.animateToPage(index, duration: Duration(microseconds: 30), curve: Curves.ease);
						}

						void onBodyPageChange(int pageIndex) {
						setState(() {
							this.pageIndex = pageIndex;
						});
						}

						int pageIndex = 0;
						PageController bodyPageController;

						@override
						void initState() {
						super.initState();
						bodyPageController = new PageController(initialPage: pageIndex);
						}

						@override
						Widget build(BuildContext context) {
						return Scaffold(
							resizeToAvoidBottomPadding: false,
							body: PageView(
								physics: NeverScrollableScrollPhysics(),
								children: <Widget>[
								TracePage(),
								ShopPage(),
								NewsPage(),
								MyPage(),
								],
								controller: bodyPageController,
								onPageChanged: onBodyPageChange,
							),
							bottomNavigationBar: BottomNavigationBar(
								type: BottomNavigationBarType.fixed,
								fixedColor: ExBlue900,
								items: [
									BottomNavigationBarItem(icon: Icon(CustomIcons.trace), title: Text('溯源')),
									BottomNavigationBarItem(icon: Icon(CustomIcons.shop), title: Text('商城')),
									BottomNavigationBarItem(icon: Icon(CustomIcons.news), title: Text('资讯')),
									BottomNavigationBarItem(icon: Icon(CustomIcons.account), title: Text('我的')),
								],
								onTap: onBottomTabTap,
								currentIndex: pageIndex));
						}
					}
					```
				</section>
				<section>
					<section data-markdown>
						## 路由
						`Flutter`的路由对象为`Navigation`。
					</section>
					<section data-markdown>
						`Navigation`的实例方法需要传入上下文`context`，一般用法为
						```dart
						Navigator.of(context).push(MaterialPageRoute(builder: (BuildContext context) {
									return WaitForTrace(trace.traceId);
								}))
						```
					</section>
					<section data-markdown>
						还有一系列方法，比如`pushNamed`，就可以用到上面提到的静态路由。
					</section>
					<section data-markdown>
						push方法还可以打开全屏页面，比如登录页从任何地方打开都要求全屏。
						```dart
						Navigator.of(context, rootNavigator: true).push(MaterialPageRoute(
											builder: (context) => LoginPage(), fullscreenDialog: true));
						```
					</section>
				</section>
				<section>
					<section data-markdown>
						## 常用组件介绍
					</section>
					<section data-markdown>
						## Text
						```dart
						Text('标题')
						```
						参数`style`可以调整`Text`的样式
					</section>
					<section data-markdown>
						## Container
						是个万能的元素，可以用来做样式容器，比如圆角，边框，阴影。
					</section>
					<section data-markdown>
						## Row
						行，`mainAxisAlignment`可以理解为`flex`中的`justify-content`
					</section>
					<section data-markdown>
						## Column
						列，与行相似
					</section>
					<section data-markdown>
						## 按钮
						搜索`Button`，可以看到很多。

						这些按钮在功能上基本一样，区别在于样式。

						其中`GestureDetector`算是最基础的按钮了，仅做了手势操作的监听，没有任何样式。
					</section>
					<section data-markdown>
						## Icon
						图标，用法也很简单
						```dart
						Icon(
							Icons.keyboard_arrow_right,
							color: Colors.grey,
						)
						```
					</section>
					<section data-markdown>
						## Color
						颜色，这里的颜色写法和平时稍显不同`Color(0xFF2699FB)`
					</section>
					<section data-markdown>
						## Center
						水平垂直居中
					</section>
					<section data-markdown>
						## Padding
						顾名思义
					</section>
					<section data-markdown>
						## Expanded
						使用它的前提是，他的父元素必须是有限空间。

						他有一个属性`flex`，默认值为1，也就是说占满有限空间下的所有空间。

						你可以通过几个`Expanded`来达到`flex`布局的效果。
					</section>
					<section data-markdown>
						## Stack&Positioned
						相当于`position: relative`和`position: absolute`的关系
					</section>
					<section data-markdown>
						## ListView
						万能列表
					</section>
					<section data-markdown>
						## RefreshIndicator
						就是我们经常见的，在下拉刷新时出现的那个东西。
						```dart
						RefreshIndicator(
								key: _refreshIndicatorKey,
								onRefresh: () async {
									if (_isLoading) {
									return;
									}
									await _getList(isPull: true);
									return;
								},
								child: _content(context));
							}
						```
					</section>
					<section data-markdown>
						## 如何使用本地图片
						以`Image`部件展示
						```dart
						Image.asset(url);
						```

						以背景图显示
						```dart
						Container(
							decoration: BoxDecoration(
								image: DecorationImage(image: AssetImage(image), fit: fit, alignment: alignment)
							),
							child: ???,
						)
						```
					</section>
					<section data-markdown>
						## 间距的写法
						常用的是这三种，还有其他几种用法，你能在IDE里都看到。margin同理
						```dart
						Container(
							padding: EdgeInsets.symmetric(vertical: 1.0, horizontal: 4.0),
							padding: EdgeInsets.all(4.0),
							padding: EdgeInsets.only(left: 1.0),
						);
						```
					</section>
					<section data-markdown>
						## TextField
						```dart
						TextEditingController _amountController = new TextEditingController();
						TextField(
							controller: _amountController,
							onChanged: (value) {},
							decoration: InputDecoration(
								contentPadding: EdgeInsets.all(12.0),
								border: OutlineInputBorder(),
								hintText: '',
								labelText: AppStrings.of(context).orderFormLabelAmount(),
								counterText: AppStrings.of(context).orderFormLabelTotal() + ' ' +  totalValue.toStringAsFixed(coinConfig.totalFixedCount) + _marketNameWithLastPrice.baseName,
								counterStyle: TextStyle(fontSize: 10.0, color: ExBlue50),
								suffixText: _marketNameWithLastPrice.toName),
						),
						```
					</section>
				</section>
				<section>
					<section data-markdown>
						## StreamBuilder 和 FutureBuilder
						业务复杂起来后，这两个部件用的非常频繁
					</section>
					<section data-markdown>
						```dart
						StreamBuilder<User>(
							stream: widget._authService.authStatus$,
							builder: (context, snapshot) {
								Widget _content = Center(
									child: CircularProgressIndicator(),
								);
								if (snapshot.hasData) {
									switch (snapshot.data.authState) {
										case UserAuthStatus.unKnow:
											break;
										case UserAuthStatus.unAuth:
											_content = LoginPage();
											break;
										case UserAuthStatus.auth:
											// 一定是商户,
											if (snapshot.data.verifyStatus == BusinessVerifyStatus.verify_success) {
												_content = TabPage();
											} else {
												_content = BusinessVerifyPage();
											}
											break;
									}
								}
								return _content;
							}
						)
						```
					</section>
					<section data-markdown>
						如果数据来源是共享数据的话，一般用`StreamBuilder`
					</section>
					<section data-markdown>
						如果数据来源是异步请求且数据独立的话，一般用`FutureBuilder`
					</section>
				</section>
				<section>
					<section data-markdown>
						# ReactiveX
					</section>
					<section data-background="./images/reactivex.png" data-background-size="20%">
					</section>
					<section data-markdown>
						Flutter里的`Stream`也是一种`ReactiveX`。

						大部分情况下，我们都会用`Stream`来处理数据
					</section>
					<section data-markdown>
						鉴于内容太多

						我们这次就只看看`Stream`都能够做什么。
					</section>
					<section data-markdown>
						1. 数据共享。
						2. 结合`StreamBuilder`自动刷新页面。
						3. 异步数据管理。
					</section>
				</section>
			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/search/search.js', async: true },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
